"use strict";(self.webpackChunkcomics_app_react=self.webpackChunkcomics_app_react||[]).push([[534],{930:function(e,n,r){var t=r(212);n.Z=t.Z},534:function(e,n,r){r.r(n),r.d(n,{default:function(){return C}});var t=r(885),a=r(791),c=r(835),i=r(982),s=r(861),o=r(757),l=r.n(o),u=r(786),d=r(212),h=r(956),m=r(184);var f=function(e){var n=e.onCharSelected,r=(0,u.ZP)(),c=r.loading,o=r.error,f=r.getAllcharacters,p=(0,a.useState)([]),_=(0,t.Z)(p,2),v=_[0],j=_[1],b=(0,a.useState)(200),x=(0,t.Z)(b,2),y=x[0],g=x[1],N=(0,a.useState)(!1),k=(0,t.Z)(N,2),w=k[0],Z=k[1],S=(0,a.useState)(!1),O=(0,t.Z)(S,2),C=O[0],E=O[1],P=(0,a.useCallback)(function(){var e=(0,s.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,n.length<9&&(r=!0),j((function(e){return[].concat((0,i.Z)(e),(0,i.Z)(n))})),E(C),g(y+9),Z(r);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),R=(0,a.useCallback)(function(){var e=(0,s.Z)(l().mark((function e(n){var r,t=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.length>1&&void 0!==t[1]?t[1]:200,E(!n),f(r).then((function(e){e&&null!==e&&P(e.data.results.map(u.Z8))}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[P,f]);(0,a.useEffect)((function(){R(!0,y)}),[]);var F=[],T=function(e){e&&F.push(e)},D=v.map((function(e,r){var t=!(-1===e.thumbnail.indexOf("image_not_available"));return(0,m.jsxs)("li",{className:"char__item",ref:T,onClick:function(){var t;n(e.id),t=r,F.forEach((function(e){return e.classList.remove("char__item_selected")})),F[t].classList.add("char__item_selected"),F[t].focus()},role:"presentation",children:[(0,m.jsx)("img",{src:e.thumbnail,alt:e.name,style:t?{objectFit:"unset"}:{objectFit:"cover"}}),(0,m.jsx)("div",{className:"char__name",children:e.name})]},e.id)})),I=o?(0,m.jsx)(d.Z,{}):null,A=c&&!C?(0,m.jsx)(h.Z,{loading:c}):null;return(0,m.jsxs)("div",{className:"char__list",children:[(0,m.jsxs)("ul",{className:"char__grid",children:[I,A,D]}),(0,m.jsx)("button",{type:"button",className:"button button__main button__long",disabled:C,style:{display:w?"none":"block"},onClick:function(){return R(!1,y)},children:(0,m.jsx)("div",{className:"inner",children:"load more"})})]})};var p=function(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),(0,m.jsxs)("div",{className:"skeleton",children:[(0,m.jsxs)("div",{className:"pulse skeleton__header",children:[(0,m.jsx)("div",{className:"pulse skeleton__circle"}),(0,m.jsx)("div",{className:"pulse skeleton__mini"})]}),(0,m.jsx)("div",{className:"pulse skeleton__block"}),(0,m.jsx)("div",{className:"pulse skeleton__block"}),(0,m.jsx)("div",{className:"pulse skeleton__block"})]})]})};function _(e){var n,r=e.char,t=r.name,a=r.description,c=r.thumbnail,i=r.homepage,s=r.wiki,o=r.comics,l=!(-1===c.indexOf("image_not_available"));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"char__basics",children:[(0,m.jsx)("img",{src:c,alt:"abyss",style:l?{objectFit:"unset"}:{objectFit:"cover"}}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"char__info-name",children:t}),(0,m.jsxs)("div",{className:"char__btns",children:[(0,m.jsx)("a",{href:i,className:"button button__main",children:(0,m.jsx)("div",{className:"inner",children:"homepage"})}),(0,m.jsx)("a",{href:s,className:"button button__secondary",children:(0,m.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),(0,m.jsx)("div",{className:"char__descr",children:a}),(0,m.jsx)("div",{className:"char__comics",children:"Comics:"}),(0,m.jsx)("ul",{className:"char__comics-list",children:o&&o.items.length>0?(n=o.items,n.slice(0,10).map((function(e,n){return(0,m.jsx)("li",{className:"char__comics-item",children:e.name},n)}))):(0,m.jsx)("h4",{children:"There is no comics of this character."})})]})}var v=function(e){var n=e.charId,r=(0,u.ZP)(),c=r.error,i=r.loading,s=r.getOneCharacter,o=r.clearError,l=(0,a.useState)({id:n,name:"",description:"",thumbnail:"",homepage:"",wiki:"",comics:{available:0,collectionURI:"",items:[],returned:0}}),f=(0,t.Z)(l,2),v=f[0],j=f[1],b=function(){n&&(o(),s(n).then((function(e){var n;e&&null!==e&&(n=e[0],j(n))})))};(0,a.useEffect)((function(){b()}),[n]);var x=!!v.id,y=x||i||c?null:(0,m.jsx)(p,{}),g=c?(0,m.jsx)(d.Z,{}):null,N=i?(0,m.jsx)(h.Z,{loading:i}):null,k=i||c||!x?null:(0,m.jsx)(_,{char:v});return(0,m.jsxs)("div",{className:"char__info",children:[y,g,N,k]})};function j(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function b(e,n){return b=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},b(e,n)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,n){if(n&&("object"===y(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,t=x(e);if(n){var a=x(this).constructor;r=Reflect.construct(t,arguments,a)}else r=t.apply(this,arguments);return g(this,r)}}var k=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&b(e,n)}(c,e);var n,r,t,a=N(c);function c(e){var n;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,c),(n=a.call(this,e)).state={error:!1},n}return n=c,t=[{key:"componentDerivedStateFromError",value:function(e){return{error:!0}}}],(r=[{key:"componentDidCatch",value:function(e,n){console.log("Unchaught error: ",e,n),this.setState({error:!0})}},{key:"render",value:function(){var e=this.state.error,n=this.props.children;return e?(0,m.jsx)("h1",{children:"Sorry.. there was an error"}):n}}])&&j(n.prototype,r),t&&j(n,t),Object.defineProperty(n,"prototype",{writable:!1}),c}(a.Component),w=r(67),Z=r(930);function S(e){var n=e.char,r=e.cutDescription,t=n.name,a=n.description,c=n.thumbnail,i=n.homepage,s=n.wiki,o=!(-1===c.indexOf("image_not_available"));return(0,m.jsxs)("div",{className:"randomchar__block",children:[(0,m.jsx)("img",{src:c,alt:"Random character",className:o?"randomchar__img_fallback":"randomchar__img"}),(0,m.jsxs)("div",{className:"randomchar__info",children:[(0,m.jsx)("p",{className:"randomchar__name",children:t}),(0,m.jsx)("p",{className:"randomchar__descr",children:r(a)}),(0,m.jsxs)("div",{className:"randomchar__btns",children:[(0,m.jsx)("a",{href:i,className:"button button__main",children:(0,m.jsx)("div",{className:"inner",children:"homepage"})}),(0,m.jsx)("a",{href:s,className:"button button__secondary",children:(0,m.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})}var O=function(){var e=(0,a.useState)({id:0,name:"",description:"",thumbnail:"",homepage:"",wiki:""}),n=(0,t.Z)(e,2),r=n[0],c=n[1],i=(0,u.ZP)(),s=i.error,o=i.loading,l=i.getOneCharacter,d=i.clearError;function f(){d();var e=Math.floor(400*Math.random()+1011e3);l(e).then((function(e){var n;e&&null!==e&&(n=e[0],c(n))}))}(0,a.useEffect)((function(){f()}),[]);var p=s?(0,m.jsx)(Z.Z,{}):null,_=o?(0,m.jsx)(h.Z,{loading:o}):null,v=o||s?null:(0,m.jsx)(S,{char:r,cutDescription:function(e){if(e){if(e.length>200){var n=e.slice(0,200);return"".concat(n,"...")}return e}return"There is no descriptiion of this character"}});return(0,m.jsxs)("div",{className:"randomchar",children:[p,_,v,(0,m.jsxs)("div",{className:"randomchar__static",children:[(0,m.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",(0,m.jsx)("br",{}),"Do you want to get to know him better?"]}),(0,m.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),(0,m.jsx)("button",{type:"button",className:"button button__main",onClick:f,children:(0,m.jsx)("div",{className:"inner",children:"Try it"})}),(0,m.jsx)("img",{src:w,alt:"mjolnir",className:"randomchar__decoration"})]})]})};var C=function(){var e=(0,a.useState)(0),n=(0,t.Z)(e,2),r=n[0],i=n[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(k,{children:(0,m.jsx)(O,{})}),(0,m.jsxs)("div",{className:"char__content",children:[(0,m.jsx)(f,{onCharSelected:function(e){i(e)}}),(0,m.jsx)(k,{children:(0,m.jsx)(v,{charId:r})})]}),(0,m.jsx)("img",{className:"bg-decoration",src:c,alt:"vision"})]})}},67:function(e,n,r){e.exports=r.p+"static/media/mjolnir.61f31e1809f12183a524.png"},835:function(e,n,r){e.exports=r.p+"static/media/vision.067d4ae1936d64a577ce.png"},982:function(e,n,r){r.d(n,{Z:function(){return c}});var t=r(907);var a=r(181);function c(e){return function(e){if(Array.isArray(e))return(0,t.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=534.bc94d3ca.chunk.js.map